<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live_Weather</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="app.css">
</head>
<body>

    <div class="searchBar">
        <div class="searchBarParentDiv">
            <input type="text" class="inputField" placeholder="Search City">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSFFHpTcjlzeOdYQbuL3cHwx6y1leNg2YXJig&s" width="28px" class="searchIcon" onclick="fetchData()">
        </div>
    </div>

    <div class="mainContentDiv">

        <div class="leftDiv">

            <div class="currentTemprature leftChild d-flex flex-column p-3 gap-2">
                <h6 class="m-0" id="CityName">City Name</h6>
                <h5 class="m-0" ><span id="CityTemp">0</span> &deg;C</h5>
                <h6 class="m-0" id="skyDesc">climate discription</h6>
                <hr>
                <div class="d-flex gap-2">
                    <i class="fa-solid fa-calendar-days"></i>
                    <h6 id="date">Date</h6>
                </div>
                <div class="d-flex gap-2">
                    <i class="fa-solid fa-clock"></i>
                    <h6 id="time">Time</h6>
                </div>
            </div>

            <div class="nextFiveDays leftChild d-flex flex-column p-3 gap-2">
                <h6 class="m-0" id="comingDaysTitle">Coming 5 days</h6>
                <div class="d-flex flex-column gap-3">
                    <div class="foreCastRow d-flex gap-1 align-items-center justify-content-around">
                        <div class="d-flex gap-1 align-items-center">
                            <i class="fa-solid fa-cloud"></i>
                            <h6 class="m-0"><span id="Temp1">0</span>&deg;C</h6>
                        </div>
                            <h6 class="m-0" id="day1">saturday</h6>
                            <h6 class="m-0" id="date1">30-08-2025</h6>
                    </div>
                    <div class="foreCastRow d-flex gap-1 align-items-center justify-content-around">
                        <div class="d-flex gap-1 align-items-center">
                            <i class="fa-solid fa-cloud"></i>
                            <h6 class="m-0"><span id="Temp2">0</span>&deg;C</h6>
                        </div>
                            <h6 class="m-0" id="day2">saturday</h6>
                            <h6 class="m-0" id="date2">30-08-2025</h6>
                    </div>
                    <div class="foreCastRow d-flex gap-1 align-items-center justify-content-around">
                        <div class="d-flex gap-1 align-items-center">
                            <i class="fa-solid fa-cloud"></i>
                            <h6 class="m-0"><span id="Temp3">0</span>&deg;C</h6>
                        </div>
                            <h6 class="m-0" id="day3">saturday</h6>
                            <h6 class="m-0" id="date3">30-08-2025</h6>
                    </div>
                    <div class="foreCastRow d-flex gap-1 align-items-center justify-content-around">
                        <div class="d-flex gap-1 align-items-center">
                            <i class="fa-solid fa-cloud"></i>
                            <h6 class="m-0"><span id="Temp4">0</span>&deg;C</h6>
                        </div>
                            <h6 class="m-0" id="day4">saturday</h6>
                            <h6 class="m-0" id="date4">30-08-2025</h6>
                    </div>
                    <div class="foreCastRow d-flex gap-1 align-items-center justify-content-around">
                        <div class="d-flex gap-1 align-items-center">
                            <i class="fa-solid fa-cloud"></i>
                            <h6 class="m-0"><span id="Temp5">0</span>&deg;C</h6>
                        </div>
                            <h6 class="m-0" id="day5">saturday</h6>
                            <h6 class="m-0" id="date5">30-08-2025</h6>
                    </div>
                    
                </div>
            </div>

        </div>

        <div class="rightDiv">

            <div class="rigthRow rowOne">
                  <div class="extraMetric">
                    <img src="c:\Users\Prem\Downloads\humidity.png"  width="35px">
                    <div>
                        <h6  class="m-0">Humidity</h6>
                        <h5 class="m-0"><span id="humidity">0</span></h5>
                    </div>
                  </div>
                  <div class="extraMetric">
                    <img src="wind.png" width="35px">
                    <div>
                        <h6  class="m-0">Pressure</h6>
                        <h5 class="m-0" ><span id="pressure">0</span></h5>
                    </div>
                  </div>
                  <div class="extraMetric">
                    <img src="c:\Users\Prem\Downloads\temperature.png" width="35px">
                    <div>
                        <h6  class="m-0">Feels_like</h6>
                        <h5 class="m-0" ><span id="feel">0</span></h5>
                    </div>
                  </div>
                  <div class="extraMetric">
                    <img src="c:\Users\Prem\Downloads\eye.png" width="35px">
                    <div >
                        <h6  class="m-0">Visibility</h6>
                        <h5 class="m-0" ><span id="visibility">0</span></h5>
                    </div>
                  </div>
            </div>

            <div class="rigthRow rowTwo">
                <div class=" AQI rowTwoDiv p-3 d-flex flex-column gap-2">
                     <h5>Air Quality Index (AQI)</h5>
                     <div class="d-flex justify-content-between align-items-center">
                        <img src="c:\Users\Prem\Downloads\wind (1).png" width="35px">
                        <div class="text-center">
                        <h6 id="co">AQI metric</h6>
                        <h5 id="coValue">0</h5>
                     </div>
                     <div class="text-center">
                        <h6 id="no">AQI metric</h6>
                        <h5 id="noValue">0</h5>
                     </div>
                     <div class="text-center">
                        <h6 id="no2">AQI metric</h6>
                        <h5 id="no2Value">0</h5>
                     </div>
                     <div class="text-center">
                        <h6 id="o3">AQI metric</h6>
                        <h5 id="o3Value">0</h5>
                     </div>
                     <div class="text-center">
                        <h6 id="so2">AQI metric</h6>
                        <h5 id="so2Value">0</h5>
                     </div>

                     </div>
                </div>

                <div class="sunRise rowTwoDiv d-flex flex-column p-3 gap-2">
                    <h6 class="m-0">Sunrise & Sunset</h6>

                    <div class="S d-flex justify-content-between">
                    <div class="sunrisediv d-flex  align-items-center gap-2">
                        <img src="c:\Users\Prem\Downloads\sunrise.png" width="100px" alt="">
                        <div>
                            <h6 class="m-0">sunrise</h6>
                            <h5 class="m-0" id="sunriseTime">6:00 AM</h5>
                        </div>
                    </div>
                    <div class="sunsetdiv d-flex align-items-center gap-2">
                        <img src="c:\Users\Prem\Downloads\sunset-.png" width="85px" alt="">
                        <div>
                            <h6 class="m-0">sunset</h6>
                            <h5 class="m-0" id="sunsetTime">6:00 PM</h5>
                        </div>
                    </div>
                    </div>
                </div>

            </div>

            <div class="rigthRow rowThree">
                 <h6>Today</h6>
                 <div class="d-flex justify-content-between todayTempParentDiv">
                    <div class="todayTemp">
                        <h6>9:00 AM</h6>
                        <img src="c:\Users\Prem\Downloads\cloudy.png" width="45px" alt="">
                        <h6><span id="t1">0</span>&deg;C</h6>
                    </div>
                     <div class="todayTemp">
                        <h6>12:00 PM</h6>
                        <img src="c:\Users\Prem\Downloads\cloudy.png" width="45px" alt="">
                        <h6><span id="t2">0</span>&deg;C</h6>
                    </div>
                     <div class="todayTemp">
                        <h6>3:00 PM</h6>
                        <img src="c:\Users\Prem\Downloads\cloudy.png" width="45px" alt="">
                        <h6><span id="t3">0</span>&deg;C</h6>
                    </div>
                     <div class="todayTemp">
                        <h6>6:00 PM</h6>
                        <img src="c:\Users\Prem\Downloads\cloudy.png" width="45px" alt="">
                        <h6><span id="t4">0</span>&deg;C</h6>
                    </div>
                     <div class="todayTemp">
                        <h6>9:00 PM</h6>
                        <img src="c:\Users\Prem\Downloads\cloudy.png" width="45px" alt="">
                        <h6><span id="t5">0</span>&deg;C</h6>
                    </div>
                 </div>
            </div>

        </div>
        
    </div>
    
    <script src="https://kit.fontawesome.com/19da305558.js" crossorigin="anonymous"></script>
    <script src="app.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>


<script>
   async function fetchAQIData(lat, lon) {
        let requestedData = await fetch(`http://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=d69abec59dbe21dc1f5a7f13246180ed`)
        let formattedData = await requestedData.json();
        console.log("AQI: ", formattedData);

        let list = formattedData.list[0].components;
        console.log("List: ", list);

        $('#co')[0].innerText='CO'
        $('#coValue')[0].innerText=list.co

        $('#no')[0].innerText='NO'
        $('#noValue')[0].innerText=list.no

        $('#o3')[0].innerText='O3'
        $('#o3Value')[0].innerText=list.o3

        $('#no2')[0].innerText='NO2'
        $('#no2Value')[0].innerText=list.no2

        $('#so2')[0].innerText='SO2'
        $('#so2Value')[0].innerText=list.so2
    
   }

   async function forCast(cityName) {
          let requestData= await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=d69abec59dbe21dc1f5a7f13246180ed&units=metric`)
          let formattedData = await requestData.json();
          console.log("ForCast: ", formattedData);

          //TEMPERATURE of UPCOMING DAYS
          let temp1 = formattedData.list[4].main.temp
          console.log("temp1: ", temp1);

          let temp2 = formattedData.list[12].main.temp
          console.log("temp2: ", temp2);

          let temp3 = formattedData.list[20].main.temp
          console.log("temp3: ", temp3);

          let temp4 = formattedData.list[28].main.temp
          console.log("temp4: ", temp4);

          let temp5 = formattedData.list[36].main.temp
          console.log("temp5: ", temp5);


          $('#Temp1')[0].innerText=temp1
          $('#Temp2')[0].innerText=temp2
          $('#Temp3')[0].innerText=temp3
          $('#Temp4')[0].innerText=temp4
          $('#Temp5')[0].innerText=temp5   
         
          //UPCOMING  DATES----
          function formatDate(timestamp) {
            const date = new Date(timestamp * 1000);
            console.log(date.toUTCString());
            console.log(date.toLocaleString());
            return date.toLocaleString();
         }

         let Date1 = formatDate(formattedData.list[4].dt).split(',')[0]
         console.log("Date1: ", Date1);

         let Date2 = formatDate(formattedData.list[12].dt).split(',')[0]
         console.log("Date2: ", Date2)

         let Date3 = formatDate(formattedData.list[20].dt).split(',')[0]
         console.log("Date3: ", Date3)

         let Date4 = formatDate(formattedData.list[28].dt).split(',')[0]
         console.log("Date4: ", Date4)

         let Date5 = formatDate(formattedData.list[36].dt).split(',')[0]
         console.log("Date5: ", Date5)

         $('#date1')[0].innerText=Date1
         $('#date2')[0].innerText=Date2
         $('#date3')[0].innerText=Date3
         $('#date4')[0].innerText=Date4
         $('#date5')[0].innerText=Date5

         //UPCOMING DAYS
         function formatDay(timestamp) {
            const date = new Date(timestamp * 1000);
            console.log(date.toUTCString());
            return date.toUTCString();
         }

         let Day1 = formatDay(formattedData.list[4].dt).split(',')[0]
         console.log("Day1: ", Day1);

         let Day2 = formatDay(formattedData.list[12].dt).split(',')[0]
         console.log("Day2: ", Day2)

         let Day3 = formatDay(formattedData.list[20].dt).split(',')[0]
         console.log("Day3: ", Day3)

         let Day4 = formatDay(formattedData.list[28].dt).split(',')[0]
         console.log("Day4: ", Day4)

         let Day5 = formatDay(formattedData.list[36].dt).split(',')[0]
         console.log("Day5: ", Day5)

         $('#day1')[0].innerText=Day1
         $('#day2')[0].innerText=Day2
         $('#day3')[0].innerText=Day3
         $('#day4')[0].innerText=Day4
         $('#day5')[0].innerText=Day5

         //24HRS TEMPERATURE---
         let T1 = formattedData.list[0].main.temp
         let T2 = formattedData.list[1].main.temp
         let T3 = formattedData.list[2].main.temp
         let T4 = formattedData.list[3].main.temp
         let T5 = formattedData.list[4].main.temp

         $('#t1')[0].innerText=T1
         $('#t2')[0].innerText=T2
         $('#t3')[0].innerText=T3
         $('#t4')[0].innerText=T4
         $('#t5')[0].innerText=T5

   }


   async function fetchData(){
        let cityName = document.getElementsByClassName('inputField')[0].value;
        console.log("current city: ", cityName)
        
        let requestData = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=d69abec59dbe21dc1f5a7f13246180ed&units=metric`)
        console.log(requestData);
        let formattedData = await requestData.json();
        console.log("formattedData: ", formattedData);

        let responseCityName = formattedData.name
        console.log("responseCityName: ", responseCityName);
        
        let responseTemp = formattedData.main.temp
        console.log("responseTemp: ", responseTemp);

        let skyDescription = formattedData.weather[0].description
        console.log("skyDescription: ", skyDescription);

        let responseHumidity = formattedData.main.humidity
        console.log("responseHumidity: ", responseHumidity);

        let responsePressure = formattedData.main.pressure
        console.log("responsePressure: ", responsePressure);

        let responseFeel = formattedData.main.feels_like
        console.log("responseFeel: ", responseFeel);

        let Visibility = formattedData.visibility
        console.log("Visibility: ",Visibility);

        

        $('#CityName')[0].innerText=responseCityName;
        $('#CityTemp')[0].innerText=responseTemp;
        $('#skyDesc')[0].innerText=skyDescription;
        $('#humidity')[0].innerText=responseHumidity;
        $('#pressure')[0].innerText=responsePressure;
        $('#feel')[0].innerText=responseFeel;
        $('#visibility')[0].innerText=Visibility;

        function formatDateOnly(timestamp) {
            const date = new Date(timestamp * 1000);
            console.log(date.toUTCString());
            console.log(date.toLocaleString());
            return date.toLocaleString();
         }

         let properDate = formatDateOnly(formattedData.dt);
         console.log("properDate: ", properDate);

         let date = properDate.split(',')[0]
         let time = properDate.split(',')[1]
         console.log("Date, Time : ", date, time);

         $('#date')[0].innerText=date
         $('#time')[0].innerText=time

         let sunRiseTime = formattedData.sys.sunrise
         let sunSetTime = formattedData.sys.sunset

         console.log("sunRiseTime: ", sunRiseTime);
         console.log("sunSetTime: ", sunSetTime);

          let properSunsetTime  = formatDateOnly(sunSetTime).split(',')[1]
          let properSunriseTime  = formatDateOnly(sunRiseTime).split(',')[1]

          console.log("properSunriseTime: ", properSunriseTime);
          console.log("properSunsetTime: ", properSunsetTime);
         
          $('#sunriseTime')[0].innerText=properSunriseTime
          $('#sunsetTime')[0].innerText=properSunsetTime

          let lat = formattedData.coord.lat;
          let lon = formattedData.coord.lon;
          fetchAQIData(lat, lon)

          forCast(cityName)

    }
</script>
</body>
</html>